<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="notes.css">
		<title>The Plan</title>
	</head>

	<body>
	
		<div class="big-title">
			The Plan
			</br>
			Text Adventure Processor
		</div>
	
		<div class="title">
			Motivation
		</div>
		
			<div class="subtitle">
				What
			</div>
			<div class="text">
				Text-Adventure-Processor seeks to provide a simple way to create a text adventure game given a series of text documents and pointers
				within them (or something like that).
				
				This is inspired by Twine 2.
			</div>
			
			<div class="subtitle">
				Why
			</div>
			<div class="text">
				It is easy to create a single text adventure, where the branching paths and decisions are hard-coded into the file. However, creating
				a system that is able to generate any text adventure with user input is a more difficult task.
			</div>
			
			<div class="subtitle">
				Who
			</div>
			<div class="text">
				This expects users to be familiar with very basic web programming if the user wants to change the CSS of the text adventure and to be
				capable of following specific rules for determining variables, choices, etc., but not want to worry with the implementation of a text
				adventure. 
			</div>
			
			<div class="subtitle">
				With What
			</div>
			<div class="text">
				This will mainly be made with Javascript, HTML, and CSS.
			</div>
			
		<div class="title">
			Overview
		</div>
		
			<div class="text">
				At its core, Text-Adventure-Processor is about organized text processing. The high-level organization will likely change once it's
				further developed, but these are the loose ideas.
			</div>
		
			<div class="subtitle">
				Hierarchy
			</div>
			<div class="text">
				The organization for the Text-Adventure is as follows:
					<ol>
						<li> Game </li>
						<li> Acts </li>
						<li> Scenes </li>
						<li> Snippets </li>
					</ol>
				Twine 2 doesn't use this organization system, and only uses "Snippets" to connect the story. This is a good system to use for shorter
				and less linear stories, where the story is not neatly separated into separate parts. However, the benefit that propels this idea is
				for users to not have to look through bulky lists of files in order to edit and add onto specific elements of their story. Even
				more abstract and non-linear stories might be able to separate their narrative based on unique organization (ex: stories with a time
				mechanic could separate scenes into time increments).
			</div>
			<div class="text">
				A Snippet is the smallest piece of the text adventure. They are the nodes of a graph, connected by the branching choices within one
				Snippet. When at the end of the Scene, a Snippet will transition from one Scene to another that does not necessarily have to be
				chronological.
			</div>
			<div class="text">
				A Scene are purely for organizational purposes, storing the Snippets within a proper containers. Transitioning from Scene to Scene
				does not directly give a pointer from one Scene to another. Instead, each Scene will be given a starting Snippet that the User will
				go to.
			</div>
			<div class="text">
				The same applies to Acts, except that it will be given a starting Scene, which will also be given a starting Snippet. While this might
				seem debilitating to those who want to start the Act at different Scenes, or the Scene at different Snippets, the entire point of these
				distinctions is to segregate the different aspects of the story into different uniform parts. From there, there could be different
				text inside the Snippet, as well as drastically different Snippets from the stating position.
			</div>
			
		<div class="subtitle">
			User
		</div>
		<div class="text">
			The user will be represented as a single Snippet Node. As it traverses throughout the Snippets, it will not have any memory of the pervious
			Snippet, nor any knowledge of what the next Snippets are other than the pointer to them.
		</div>

	<div class="title">
		Implementation Description
	</div>
		<div class="subtitle">
			Anatomy of a Snippet
		</div>
		<div class="text">
			There are a couple of different elements that make up a Snippet, that are divided by two choices:
			</br>
			<ul>
				<li> Static or Variable </li>
				<li> Plain or Choice </li>
			</ul>
		</div>
		<div class="text">
			With a proper amount of imagination, a writer might be able to make up a special case that is outside of these dyads, but this is good
			enough for this current version. 
		</div>
		<div class="text">
			Static text is pre-determined. Regardless of the choices someone has previously made in the story, this will be exactly the same. For
			example, if the story is about a character in prison, the prison will be described the same whether the narrator is male or female.
			
			Variable text is dependent on previous choices made, and is directly linked with the State (to be later described). If the character is
			male, he will be described using "he" and "him," while a female narrator is described with "she" and "her."
		</div>
		<div class="text">
			Plain text is non-clickable text presented to the reader.
			
			Choice text is clickable, and sends the user from one Snippet to another.
		</div>
		
				
		<div class="text">
			The challenge of the different types of Snippets is to create the most flexible and simple design to encapsulate every combination
			of options. Variable text itself is only stored within a Snippet, while the variable that the text changes based on is stored in the
			State (see later). This currently puts the burden of text-defining logic on the user at this point, and requires that they have enough
			CS background knowledge to complete basic if/else statements. This might change to something more user-friendly as the system progresses.
		</div>
		
		<div class="subtitle">
			Path to a Concrete Snippet
		</div>
		
		<div class="text">
			Originally, I had intended to purely use the .txt format for the user to generate the different Snippets within their story.
			This raised a number of questions: How would the file contain its choices? How would it signal to the state any changes it makes?
			What if a choice led to more complicated actions?
		</div>
		
		<div class="text">
			Currently, I think a better solution would be to store the data of a Snippet entirely within a .json file for the system's first
			version. I imagine it containing the following subsections:
			
			<ul>
				<li> Text </li>
				<li> Choice Key </li>
					<ul>
						<li> Name </li>
						<li> Consequences </li>
					</ul>
				<li> Variable Key </li>
				<li> Metadata </li>
			</ul>
		</div>
		
		<div class="text">
			Text is what the user will actually see, and the prose aspect of the Snippet. Within the text, it will reference variables and
			choices (perhaps with LaTeX-like syntax) that the system can look up in the Variable Key and Choice Key. The system will have to
			determine which piece of Variable Text to use before presenting the document, while the Consequences of a choice won't matter
			unless the user selects it. I'm using Metadata as a current catch-all for data that will need to be stored in order for the system
			to operate as intended. An example of this could be changing the text speed or style for a particular Snippet, or maybe its
			background color.
		</div>
		
		<div class="subtitle">
			Anatomy of a Scene/Act
		</div>
		<div class="text">
			Scenes and Acts are similar enough in structure that they can be composed the same without much issue (perhaps they can both
			be inherited from a Container class). For the most part, Scenes to not require bulky computation. Going from Snippet to Snippet
			is not the responsibility of Scene, but of User. However, each Scene and Act will need to be equipped with metadata (maybe not
			called metadata) for what the starting Snippet is for those first entering the Scene. The process for transitioning from Scene
			to Scene goes as followed:
				<ol>
					<li>Have a choice result in a function such as transitionToScene(X)</li>
					<li>Save appropriate state-stored variables to next largest scope</li>
					<li>If transitioning between Acts, find metadata for the starting Scene</li>
					<li>Find metadata for the starting Snippet</li>
					<li>Assign User to the starting Snippet</li>
				</ol>
			
			With the term metadata, at this current time I'll assign the name "transition information," or something like that. There's
			also the low-level question of, if the Snippets will be represented by .json, should the transition information be a different
			file type for more clarity? If transition information only stores the starting node, if could be a one-line text document. If it
			ends up storing other information, such as a list of local state variables, then it could still be something other than a
			.json file.
			
		</div>
			
		<div class="subtitle">
			State
		</div>
		<div class="text">
			The purpose of the state is to remember user choices, regardless of whether they lead to a different Snippet or not, for
			the benefit of variable text. The user's choices will be called variables, and it does not represent the variable text, but
			only a user's choice, such as "pressedButton" or "insultUsed." Since the system does not remember the nodes that came before
			it, or know the content of the nodes after it, having a state is essential.
		
			However, the state is something I'm not entirely sure what to do with. There are three methods of varying quality to structure
			the State:
			
			<ol>
				<li> A global singleton state </li>
				<li> A local state that passes from Scene to Scene </li>
				<li> One global state with multiple state buffers within each Scene </li>
			</ol>
			
			A global singleton is beneficial when the variables do not change often throughout the Snippets, and when the variables are not
			used frequently enough for a global variable retrieval to be more expensive than using a buffer. Higher coupling would also occur.
			</br>
			A local state is beneficial when variables are highly depedent on the specific Scene, and rarely used outside of one Scene. Act-scope
			or Global values would need to be copied from Scene to Scene, which would quickly become an expensive process, and complicate the
			act of storing a variable.
			</br>
			The global state and buffer would be a happy medium between the two. Variables limited to the scene would have no need to exit the 
			buffer, and fetched global variables can remain in the buffer to be thrown away once the Scene is over.
		</div>
		<div class="text">
			
			There is also the question of whether the variables within the state should be freely-inserted, or if the user needs to define them
			explicitly. 
		</div>
		
				<div class="subtitle">
			The User
		</div>
		
	</body>
</html>